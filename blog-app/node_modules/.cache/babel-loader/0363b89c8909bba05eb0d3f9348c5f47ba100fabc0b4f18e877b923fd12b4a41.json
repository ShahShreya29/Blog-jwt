{"ast":null,"code":"import TextField from\"./TextField\";import AddBtn from\"./AddBtn\";import{Link,useNavigate}from\"react-router-dom\";import{Formik,Form}from\"formik\";import*as yup from\"yup\";import{useDispatch}from\"react-redux\";import{logIn}from\"../AuthReducer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LoginForm=()=>{const validate=yup.object({email:yup.string().email(\"invalid email\").required(\"email is required\"),password:yup.string().required(\"Password is Required\").min(6,\"At Least 6 Character\")});const navigate=useNavigate();const dispatch=useDispatch();let loggedUser={};const handleLogin=e=>{var users=JSON.parse(localStorage.getItem(\"users\"));let isUserValid=false;users.map(user=>{if(e.email===user.email&&btoa(e.password)===user.password){sessionStorage.setItem(\"name\",user.name);sessionStorage.setItem(\"user\",JSON.stringify({userEmail:e.email}));dispatch(logIn({userEmail:e.email}));isUserValid=true;loggedUser=user;}});if(isUserValid){alert(\"login SuccessFully \"+loggedUser.name);if(loggedUser.role===\"user\"){navigate(\"/Blogs\");}else{navigate(\"/BlogList\");}}else{alert(\"invalid username or password\");}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\",password:\"\"},validationSchema:validate,onSubmit:handleLogin,children:Formik=>/*#__PURE__*/_jsx(\"div\",{className:\"container m-5\",children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4 col-md-offset-5 align-center \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"m-5 text-center\",children:\"Login \"}),/*#__PURE__*/_jsx(TextField,{label:\"Email: \",type:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(TextField,{label:\"Password: \",type:\"password\",name:\"password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(AddBtn,{style:{marginLeft:\"130px\",marginTop:\"10px\",backgroundColor:\"#1070ef\",color:\"white\",width:\"99px\"},children:[\" \",\"LogIn\"]})}),/*#__PURE__*/_jsxs(\"h6\",{className:\"text-center m-3\",children:[\"PLEASE \",/*#__PURE__*/_jsx(Link,{to:\"/Blog-react-redux/\",children:\"SIGNUP!!\"}),\" FIRST\"]})]})})})})})});};export default LoginForm;","map":{"version":3,"names":["TextField","AddBtn","Link","useNavigate","Formik","Form","yup","useDispatch","logIn","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","validate","object","email","string","required","password","min","navigate","dispatch","loggedUser","handleLogin","e","users","JSON","parse","localStorage","getItem","isUserValid","map","user","btoa","sessionStorage","setItem","name","stringify","userEmail","alert","role","children","initialValues","validationSchema","onSubmit","className","label","type","style","marginLeft","marginTop","backgroundColor","color","width","to"],"sources":["/home/shreya/Documents/react/blog-app/src/Components/LoginForm.js"],"sourcesContent":["import TextField from \"./TextField\";\nimport AddBtn from \"./AddBtn\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Formik, Form } from \"formik\";\nimport * as yup from \"yup\";\nimport { useDispatch } from \"react-redux\";\nimport { logIn } from \"../AuthReducer\";\n\nconst LoginForm = () => {\n  const validate = yup.object({\n    email: yup.string().email(\"invalid email\").required(\"email is required\"),\n    password: yup\n      .string()\n      .required(\"Password is Required\")\n      .min(6, \"At Least 6 Character\"),\n  });\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  let loggedUser = {};\n\n  const handleLogin = (e) => {\n    var users = JSON.parse(localStorage.getItem(\"users\"));\n    let isUserValid = false;\n    users.map((user) => {\n      if (e.email === user.email && btoa(e.password) === user.password) {\n        sessionStorage.setItem(\"name\", user.name);\n        sessionStorage.setItem(\"user\", JSON.stringify({ userEmail: e.email }));\n        dispatch(logIn({ userEmail: e.email }));\n        isUserValid = true;\n        loggedUser = user;\n      }\n    });\n    if (isUserValid) {\n      alert(\"login SuccessFully \" + loggedUser.name);\n      if (loggedUser.role === \"user\") {\n        navigate(\"/Blogs\");\n      } else {\n        navigate(\"/BlogList\");\n      }\n    } else {\n      alert(\"invalid username or password\");\n    }\n  };\n\n  return (\n    <>\n      <Formik\n        initialValues={{\n          email: \"\",\n          password: \"\",\n        }}\n        validationSchema={validate}\n        onSubmit={handleLogin}\n      >\n        {(Formik) => (\n          <div className=\"container m-5\">\n            <Form>\n              <div className=\"row justify-content-center\">\n                <div className=\"form-group col-md-4 col-md-offset-5 align-center \">\n                  <h1 className=\"m-5 text-center\">Login </h1>\n                  <TextField label=\"Email: \" type=\"email\" name=\"email\" />\n                  <TextField\n                    label=\"Password: \"\n                    type=\"password\"\n                    name=\"password\"\n                  />\n                  <div>\n                    <AddBtn\n                      style={{\n                        marginLeft: \"130px\",\n                        marginTop: \"10px\",\n                        backgroundColor: \"#1070ef\",\n                        color: \"white\",\n                        width: \"99px\",\n                      }}\n                    >\n                      {\" \"}\n                      LogIn\n                    </AddBtn>\n                  </div>\n                  <h6 className=\"text-center m-3\">\n                    PLEASE <Link to=\"/Blog-react-redux/\">SIGNUP!!</Link> FIRST\n                  </h6>\n                </div>\n              </div>\n            </Form>\n          </div>\n        )}\n      </Formik>\n    </>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}